<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>리뷰프로모션 FAQ</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f4f6f9;
      margin: 0;
      padding: 20px;
      display: flex;
      height: 100vh;
    }
    /* 왼쪽 사이드바: 상단에 리뷰프로모션 버튼과 검색창, 하위에 단계 버튼 표시 */
    .sidebar {
      width: 20%;
      padding: 20px;
      border-right: 2px solid #ddd;
      background: #ffffff;
      overflow-y: auto;
    }
    .faq-container {
      margin-top: 10px;
      padding-top: 10px;
      border-top: 2px solid #ddd;
    }
    .faq-item {
      background: #f1f5fa;
      border-radius: 10px;
      margin-bottom: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      padding: 10px;
      text-align: left;
      font-weight: bold;
    }
    .faq-item:hover {
      background: #e0e0e0;
    }
    .faq-item.category {
      padding-left: 15px;
    }
    /* 중앙 영역: 단계별 고정 카테고리 버튼 또는 질문 목록 */
    .middle-section {
      width: 20%;
      padding: 20px;
      border-right: 2px solid #ddd;
      background: #ffffff;
      overflow-y: auto;
    }
    /* 오른쪽 영역: 질문 선택 시 상세 내용 표시 */
    .question-display {
      width: 40%;
      background: #f1f5fa;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
      height: 100vh;
    }
    .selected-question {
      font-size: 22px;
      font-weight: bold;
      color: #007bff;
      margin-bottom: 10px;
    }
    .selected-response {
      padding: 15px;
      background: #e3f2fd;
      border-radius: 5px;
      font-size: 16px;
    }
    .search-container {
      padding-bottom: 10px;
      margin-bottom: 10px;
    }
    .search-container input {
      width: calc(100% - 40px);
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
      display: block;
      margin: 0 auto;
    }
    .faq-header {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .info-button {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background-color: #007bff;
      color: white;
      text-align: center;
      font-size: 16px;
      font-weight: bold;
      line-height: 24px;
      cursor: pointer;
      border: none;
      margin-left: 5px;
    }
    .tooltip {
      display: none;
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      font-size: 14px;
      white-space: nowrap;
      z-index: 1000;
    }
    .tooltip.show {
      display: block;
    }
  </style>
</head>
<body>
  <!-- 왼쪽 사이드바: 리뷰프로모션 버튼 및 검색 -->
  <div class="sidebar">
    <div class="faq-header" onclick="renderStages()">
      <h1>리뷰프로모션</h1>
      <button class="info-button" onclick="toggleTooltip(event)">!</button>
    </div>
    <div class="search-container">
      <input type="text" id="search" placeholder="검색어를 입력하세요..." onkeyup="filterFAQ()">
    </div>
    <!-- 리뷰프로모션 클릭 시 단계 버튼(도입, 상담진행, 마무리) 표시 -->
    <div class="faq-container" id="stageContainer"></div>
  </div>
  
  <!-- 중앙 영역: 선택한 단계에 따른 고정 카테고리(효과, 비용, 운영방식) 또는 질문 목록 -->
  <div class="middle-section" id="middleSection"></div>
  
  <!-- 오른쪽 영역: 질문 상세 내용 -->
  <div class="question-display" id="questionDisplay">
    <p>질문을 클릭하면 여기에 표시됩니다.</p>
  </div>

  <div class="tooltip" id="tooltip">
    FAQ 용어 정리 (검색 시 일관된 단어 사용 권장)<br>
    요금 : 금액, 가격, 객단가, 객실가, 단가<br>
    리뷰 : 후기, 이용후기, 평가, 별점<br>
    취소 : 중단, 중지, 제외, 철회, 보류, 종료, 해지<br>
    보상 : 리워드, 상품, 선물, 상금, 혜택
  </div>

  <script>
    // 기존 FAQ 데이터 (예시 데이터)
    const faqData = [
      {
        scenario: "도입",
        category: "첫인사",
        question: "[상담신청OB] 첫인사와 솔루션 소개",
        response: "안녕하세요. 트립일레븐 마케팅 담당자 000입니다.<br>상담 신청하신 것을 확인하고 기쁜 마음으로 연락드리게 되었습니다.<br>해당 솔루션에 대해 짧게 안내드려도 될까요?<br><br>솔루션은 대표적으로 4가지가 있는데요, 그중에서도 리뷰 프로모션은 부담없이 시도해볼 수 있는 방법입니다."
      },
      {
        scenario: "도입",
        category: "탐색질문",
        question: "리뷰 프로모션이 뭔가요?",
        response: "리뷰 프로모션은 이용 후 고객이 채널에 리뷰를 작성하고 인증하면 보상을 지급하는 이벤트입니다."
      },
      {
        scenario: "도입",
        category: "효과",
        question: "이 프로모션이 도움이 될까요?",
        response: "네, 최신 리뷰가 쌓이면 고객 신뢰도가 높아져 예약 전환율 상승에 도움이 됩니다."
      },
      {
        scenario: "상담진행",
        category: "비용",
        question: "비용은 얼마나 드나요?",
        response: "고객이 리뷰 인증 시 1건당 1만 원의 보상 비용이 정산금에서 차감되며 월 최대 20만 원 한도 내에서 운영됩니다."
      },
      {
        scenario: "상담진행",
        category: "운영방식",
        question: "어떤 리뷰에 보상이 지급되나요?",
        response: "사진 포함 리뷰를 기준으로 보상이 지급되며, 욕설 등 부적절한 내용은 제외됩니다."
      },
      {
        scenario: "상담진행",
        category: "반론",
        question: "이미 리뷰가 많습니다.",
        response: "기존 리뷰가 많더라도 최신 리뷰는 고객의 결정에 큰 영향을 미칩니다."
      },
      {
        scenario: "마무리",
        category: "신청방법",
        question: "리뷰 프로모션 신청 방법은?",
        response: "카카오톡 또는 전화로 신청하시면 순차적으로 진행해 드립니다."
      },
      {
        scenario: "마무리",
        category: "마무리인사",
        question: "상담 완료 후 인사말",
        response: "신청해 주셔서 감사합니다. 지속적으로 모니터링하겠습니다."
      }
    ];
    
    // 단계별 고정 카테고리 매핑 (필요에 따라 수정)
    const categoryMapping = {
      "도입": {
        "효과": ["첫인사", "탐색질문", "효과"],
        "비용": [],
        "운영방식": []
      },
      "상담진행": {
        "효과": [],
        "비용": ["비용"],
        "운영방식": ["운영방식", "반론"]
      },
      "마무리": {
        "효과": [],
        "비용": [],
        "운영방식": ["신청방법", "마무리인사"]
      }
    };
    
    // 리뷰프로모션 클릭 시 왼쪽에 단계(도입, 상담진행, 마무리) 버튼 표시
    const stageButtons = ["도입", "상담진행", "마무리"];
    function renderStages() {
      const container = document.getElementById("stageContainer");
      container.innerHTML = stageButtons.map(stage =>
        `<div class="faq-item" onclick="selectStage('${stage}')">${stage}</div>`
      ).join('');
      // 중앙 영역 초기화 (단계 선택 전 상태)
      document.getElementById("middleSection").innerHTML = "";
      document.getElementById("questionDisplay").innerHTML = "<p>질문을 클릭하면 여기에 표시됩니다.</p>";
    }
    
    let currentStage = "";
    // 단계 버튼 클릭 시 해당 단계를 저장하고, 중앙 영역에 고정 카테고리 버튼 표시
    function selectStage(stage) {
      currentStage = stage;
      renderFixedCategories(stage);
    }
    
    // 중앙 영역에 고정 카테고리(효과, 비용, 운영방식) 버튼 표시
    function renderFixedCategories(stage) {
      const fixedCategories = ["효과", "비용", "운영방식"];
      const container = document.getElementById("middleSection");
      container.innerHTML = fixedCategories.map(category =>
        `<div class="faq-item category" onclick="renderQuestions('${stage}', '${category}')">${category}</div>`
      ).join('');
      // 오른쪽 영역 초기화
      document.getElementById("questionDisplay").innerHTML = "<p>질문을 클릭하면 여기에 표시됩니다.</p>";
    }
    
    // 고정 카테고리 버튼 클릭 시 해당 단계 및 카테고리의 질문 목록 표시
    function renderQuestions(stage, fixedCategory) {
      const mappedCategories = categoryMapping[stage][fixedCategory] || [];
      const questions = faqData.filter(item =>
        item.scenario === stage && mappedCategories.includes(item.category)
      );
      const container = document.getElementById("middleSection");
      if (questions.length === 0) {
        container.innerHTML = `<div class="faq-item">해당 항목의 질문이 없습니다.</div>`;
      } else {
        container.innerHTML = questions.map(item =>
          `<div class="faq-item" onclick="displayQuestion('${item.question}', \`${item.response}\`)">${item.question}</div>`
        ).join('');
      }
    }
    
    // 질문 클릭 시 오른쪽 영역에 질문 상세 내용 표시
    function displayQuestion(questionText, responseText) {
      document.getElementById("questionDisplay").innerHTML =
        `<p class="selected-question">${questionText}</p><p class="selected-response">${responseText}</p>`;
    }
    
    // 검색 기능 (전체 데이터에서 질문 검색)
    function filterFAQ() {
      const query = document.getElementById("search").value.trim().toLowerCase();
      const container = document.getElementById("middleSection");
      if (query === "") {
        // 검색어 없으면 기존 상태 유지
        return;
      }
      const results = faqData.filter(item =>
        item.question.toLowerCase().includes(query)
      );
      if (results.length === 0) {
        container.innerHTML = `<div class="faq-item">검색 결과가 없습니다.</div>`;
      } else {
        container.innerHTML = results.map(item =>
          `<div class="faq-item" onclick="displayQuestion('${item.question}', \`${item.response}\`)">${item.question}</div>`
        ).join('');
      }
    }
    
    // 툴팁 토글 (이벤트 전파 방지)
    function toggleTooltip(e) {
      if(e) e.stopPropagation();
      const tooltip = document.getElementById("tooltip");
      tooltip.classList.toggle("show");
      setTimeout(() => {
        tooltip.classList.remove("show");
      }, 3000);
    }
    
    // 초기 상태: stageContainer 비워둠 (리뷰프로모션 클릭 시 렌더)
    document.getElementById("stageContainer").innerHTML = "";
  </script>
</body>
</html>
