<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FAQ 검색</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f4f6f9;
      margin: 0;
      padding: 20px;
      display: flex;
      height: 100vh;
    }
    
    .faq-section {
      width: 20%;
      padding: 20px;
      border-right: 2px solid #ddd;
      overflow-y: auto;
      background: #ffffff;
    }

    .faq-container {
      width: 100%;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 2px solid #ddd;
    }
    
    .faq-item {
      background: #f1f5fa;
      border-radius: 10px;
      margin-bottom: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      padding: 10px;
      text-align: left;
      font-weight: bold;
    }
    
    .faq-item:hover {
      background: #e0e0e0;
    }

    /* 시나리오 항목 스타일 */
    .faq-item.scenario {
      background: #e9f0ff;
      border-bottom: 2px solid #ddd;
      font-weight: bold;
    }

    /* category 항목 스타일 */
    .faq-item.category {
      background: #f1f5fa;
      padding-left: 15px;
      font-weight: bold;
    }
    
    /* 그룹 항목 스타일 */
    .faq-item.group {
      background: #d0e0ff;
      border: 2px solid #007bff;
      font-weight: bold;
    }

    .category-container {
      display: none;
      margin-top: 5px;
      transition: all 0.3s ease-in-out;
    }

    .question-display {
      width: 40%;
      background: #f1f5fa;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
      height: 100vh;
    }
    
    .selected-question {
      font-size: 22px;
      font-weight: bold;
      color: #007bff;
      margin-bottom: 10px;
    }

    .selected-response {
      padding: 15px;
      background: #e3f2fd;
      border-radius: 5px;
      font-size: 16px;
    }

    .search-container {
      padding-bottom: 10px;
      margin-bottom: 10px;
    }

    .search-container input {
      width: calc(100% - 40px);
      padding: 12px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
      display: block;
      margin: 0 auto;
    }

    .faq-header {
      display: flex;
      align-items: center;
    }

    .info-button {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background-color: #007bff;
      color: white;
      text-align: center;
      font-size: 16px;
      font-weight: bold;
      line-height: 24px;
      cursor: pointer;
      border: none;
      margin-left: 5px;
    }

    .tooltip {
      display: none;
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      font-size: 14px;
      white-space: nowrap;
      z-index: 1000;
    }

    .tooltip.show {
      display: block;
    }
  </style>
</head>
<body>
  <div class="faq-section">
    <div class="faq-header">
      <h1>FAQ 검색</h1>
      <button class="info-button" onclick="toggleTooltip()">!</button>
    </div>
    
    <div class="search-container">
      <input type="text" id="search" placeholder="검색어를 입력하세요..." onkeyup="filterFAQ()" />
    </div>

    <!-- 그룹 및 시나리오 항목 렌더링 영역 -->
    <div class="faq-container" id="scenarioContainer"></div>
  </div>
  
  <div class="faq-section" id="questionSection"></div>
  <div class="question-display" id="questionDisplay">
    <p>질문을 클릭하면 여기에 표시됩니다.</p>
  </div>

  <div class="tooltip" id="tooltip">
    FAQ 용어 정리 (검색이 용이하기 위해 일관된 단어로 검색해주세요.)<br>
    요금 : 금액, 가격, 객단가, 객실가, 단가<br>
    리뷰 : 후기, 이용후기, 평가, 별점<br>
    취소 : 중단, 중지, 제외, 철회, 보류, 종료, 해지<br>
    보상 : 리워드, 상품, 선물, 상금, 혜택
  </div>

  <script>
    // faqData에 그룹 정보 추가 (기존 항목은 그룹 "시나리오")
    const faqData = [
      {
        group: "시나리오",
        scenario: "도입",
        category: "첫인사",
        question: "[상담신청OB] 첫인사와 솔루션 소개",
        response: "안녕하세요. 트립일레븐 마케팅 담당자 000입니다.<br>상담 신청하신 것을 확인하고 기쁜 마음으로 연락드리게 되었습니다.<br>해당 솔루션에 대해 짧게 안내드려도될까요?<br><br>솔루션은 대표적으로 4가지가 있는데요, 그중에서도 리뷰 프로모션은 가장 부담없이 시도해볼 수 있는 방법입니다.<br>요즘 고객들은 펜션을 선택할 때 최신 리뷰를 중요하게 보는데,<br>이 프로모션을 진행하면 고객이 보상을 받기 위해서 자연스럽게 리뷰를 작성할 수 있게 유도가 되고, 리뷰들이 쌓이면서 신뢰도를 높여서 예약 전환율 올릴 수 있습니다.<br>현재 약 300개 이상 펜션에서 진행 중이고, 실제로 예약률이 상승한 사례가 많습니다. 대표님도 한번 진행해보시는 건 어떨까요?"
      },
      {
        group: "시나리오",
        scenario: "마무리",
        category: "마무리인사",
        question: "상담 완료 후 마무리 인사",
        response: "(신청한 경우)<br>대표님, 리뷰 보상 1건당 00원, 월 예산 한도 00원으로 신청 접수 되었습니다.<br>프로모션 효과를 최대한 보실 수 있도록 지속적으로 모니터링하겠습니다. 신청해 주셔서 감사합니다.<br><br>(미신청한 경우)<br>대표님, 우선 이번에는 진행하지않는 걸로 하겠습니다.<br>다만, 안내드린 것처럼 리뷰 프로모션은 예약률을 높이는 가장 기초적인 솔루션 중 하나 입니다.<br>한 번 더 고민해 보시고, 필요하시면 언제든 말씀 주세요. 감사합니다."
      },
      {
        group: "광고",
        scenario: "도입",
        category: "탐색질",
        question: "광고가 무엇인가요?",
        response: "광고란 채널에 비용을 투자하여 일정 기간 동안 리스트 상단에 노출되거나, 광고 지면에 배치되면서 고객한테 노출을 늘릴수있는 마케팅입니다.<br><br>예를 들어, 여기어때는 앱에 접속해 펜션 카테고리에서 지역을 선택하면, 광고 상품이 최상단에 보여지고 그 아래에 광고를 진행하지않는 일반 상품이 노출되는 구조입니다.<br>고객들은 펜션을 찾을 때 상위 리스트에서 선택할 확률이 높기 때문에, 광고를 진행하는 업체들이 자연스럽게 우선적인 후보에 오르게 됩니다.<br><br>반면, 광고없이 하단에 위치한 업체들은 경쟁에서 밀릴 가능성이 큽니다.<br><br>그래서 매출을 올리기 위해서는 광고를 통해 고객에게 노출을 늘리고 예약할 확률을 높이는 것이 효과적입니다."
      },
    ];

    // 그룹(상위 카테고리)와 해당 그룹의 시나리오 렌더링 함수
    function renderGroups() {
      const container = document.getElementById("scenarioContainer");
      container.innerHTML = '';
      // 그룹 목록 추출
      const groups = [...new Set(faqData.map(item => item.group))];
      groups.forEach(group => {
        // 그룹 항목 생성
        const groupDiv = document.createElement("div");
        groupDiv.classList.add("faq-item", "group");
        groupDiv.textContent = group;
        groupDiv.onclick = () => toggleGroup(group);
        
        // 그룹 내 시나리오 목록을 담을 컨테이너 (초기 숨김)
        const groupContainer = document.createElement("div");
        groupContainer.id = `groupContainer-${group}`;
        groupContainer.style.display = "none";
        
        // 해당 그룹의 고유 시나리오 추출
        const scenarios = [...new Set(faqData.filter(item => item.group === group).map(item => item.scenario))];
        scenarios.forEach(scenario => {
          const scenarioDiv = document.createElement("div");
          scenarioDiv.classList.add("faq-item", "scenario");
          scenarioDiv.textContent = scenario;
          // 그룹 토글 이벤트와 중복되지 않도록 이벤트 전파 차단
          scenarioDiv.onclick = (e) => {
            e.stopPropagation();
            toggleCategories(group, scenario);
          };
          
          // 시나리오의 카테고리 목록을 담을 컨테이너 생성
          const categoryContainer = document.createElement("div");
          categoryContainer.classList.add("category-container");
          categoryContainer.id = `category-${group}-${scenario}`;
          
          groupContainer.appendChild(scenarioDiv);
          groupContainer.appendChild(categoryContainer);
        });
        
        container.appendChild(groupDiv);
        container.appendChild(groupContainer);
      });
    }

    // 그룹 클릭 시 해당 그룹의 시나리오 목록 토글
    function toggleGroup(group) {
      const groupContainer = document.getElementById(`groupContainer-${group}`);
      groupContainer.style.display = groupContainer.style.display === "block" ? "none" : "block";
    }

    // 시나리오 클릭 시 해당 시나리오의 카테고리 목록 토글
    function toggleCategories(group, scenario) {
      const container = document.getElementById(`category-${group}-${scenario}`);
      if (container.style.display === "block") {
        container.style.display = "none";
        container.innerHTML = '';
      } else {
        container.style.display = "block";
        // 해당 그룹 및 시나리오의 고유 카테고리 추출
        const categories = [...new Set(faqData.filter(item => item.group === group && item.scenario === scenario).map(item => item.category))];
        container.innerHTML = categories
          .map(category => `<div class="faq-item category" onclick="renderQuestions('${group}', '${scenario}', '${category}')">${category}</div>`)
          .join('');
      }
    }

    // 선택한 그룹, 시나리오, 카테고리에 해당하는 질문 렌더링
    function renderQuestions(group, scenario, category) {
      const container = document.getElementById("questionSection");
      const questions = faqData.filter(item => item.group === group && item.scenario === scenario && item.category === category);
      container.innerHTML = questions
        .map(item => `<div class="faq-item" onclick="displayQuestion('${item.question}', '${item.response}')">${item.question}</div>`)
        .join('');
    }

    // 질문 선택 시 오른쪽 영역에 질문과 답변 표시
    function displayQuestion(questionText, responseText) {
      document.getElementById("questionDisplay").innerHTML =
        `<p class="selected-question">${questionText}</p><p class="selected-response">${responseText}</p>`;
    }

    // 툴팁 토글 함수
    function toggleTooltip() {
      const tooltip = document.getElementById("tooltip");
      tooltip.classList.toggle("show");
      setTimeout(() => {
        tooltip.classList.remove("show");
      }, 3000);
    }

    // 검색어 입력 시 질문 항목 필터링 (그룹/시나리오 무관)
    function filterFAQ() {
      const query = document.getElementById("search").value.trim().toLowerCase();
      const container = document.getElementById("questionSection");
      if (query === "") {
        container.innerHTML = "";
        return;
      }
      const results = faqData.filter(item => item.question.toLowerCase().includes(query));
      if (results.length === 0) {
        container.innerHTML = `<div class="faq-item">검색 결과가 없습니다.</div>`;
      } else {
        container.innerHTML = results
          .map(item => `<div class="faq-item" onclick="displayQuestion('${item.question}', '${item.response}')">${item.question}</div>`)
          .join('');
      }
    }

    renderGroups();
  </script>
</body>
</html>
